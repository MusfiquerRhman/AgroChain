{"ast":null,"code":"var _jsxFileName = \"H:\\\\Agro Chain\\\\agro_chain\\\\client\\\\src\\\\components\\\\productsComponents\\\\product.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { useSelector } from 'react-redux'; // MaterialUI Elements\n\nimport CardContent from '@mui/material/CardContent';\nimport CardMedia from '@mui/material/CardMedia';\nimport Typography from '@mui/material/Typography';\nimport ListItemText from \"@mui/material/ListItemText\";\nimport Input from '@mui/material/Input';\nimport InputAdornment from \"@mui/material/InputAdornment\";\nimport FormHelperText from \"@mui/material/FormHelperText\";\nimport FormControl from \"@mui/material/FormControl\";\nimport CardActions from '@mui/material/CardActions';\nimport Button from '@mui/material/Button';\nimport Paper from '@mui/material/Paper';\nimport CardHeader from '@mui/material/CardHeader';\nimport CardActionArea from '@mui/material/CardActionArea';\nimport Snackbar from '@mui/material/Snackbar';\nimport MuiAlert from '@mui/material/Alert';\nimport style from \"../../styles/productStyle\";\nimport * as userApi from \"../../api/users\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Alert = /*#__PURE__*/React.forwardRef(_c = function Alert(props, ref) {\n  return /*#__PURE__*/_jsxDEV(MuiAlert, {\n    elevation: 6,\n    ref: ref,\n    variant: \"filled\",\n    ...props\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 25,\n    columnNumber: 12\n  }, this);\n});\n_c2 = Alert;\nexport default function Product(props) {\n  _s();\n\n  const navigate = useNavigate();\n  const users = useSelector(state => state.users);\n  const [value, setValue] = useState(\"\");\n  const [totalPrice, setTotalPrice] = useState(\"Enter Amount\");\n  const [snakeBarOpen, setSnakebarOpen] = useState(false);\n  const [flashMessage, setFlashMEssage] = useState(\"\");\n  const [isLoggedIn, setIsLoggedIn] = useState(false);\n  const [snakeBarType, setSnakeBarType] = useState(\"success\");\n  useEffect(() => {\n    async function fetchData() {\n      const res = await userApi.isLoggedIn();\n\n      if (res.data.code === 200 || res.data.code === 970904) {\n        setIsLoggedIn(true);\n      }\n    }\n\n    fetchData;\n  }, [users.userId]);\n\n  const handleChange = event => {\n    setValue(event.target.value);\n\n    if (event.target.value !== \"\") {\n      setTotalPrice(`Price: ${(PRODUCT_AGRO_PRICE - PRODUCT_AGRO_PRICE * PRODUCT_DISCOUNT / 100) * event.target.value}`);\n    } else {\n      setSnakeBarType(\"error\");\n      setTotalPrice(\"Add to cart\");\n    }\n  };\n\n  const {\n    PRODUCT_ID,\n    ADMIN_ID,\n    PRODUCT_NAME_EN,\n    PRODUCT_NAME_BN,\n    PRODUCT_IN_STOCK_QUANTITY,\n    PRODUCT_MEASUREMENT_UNIT,\n    PRODUCT_AGRO_PRICE,\n    PRODUCT_DISCOUNT,\n    PRODUCT_IMG\n  } = props;\n  const photo = `/img/${PRODUCT_IMG}`;\n  const classes = style();\n\n  const submitForm = async e => {\n    if (value > 0) {\n      setSnakebarOpen(false);\n      const res = await userApi.addToCart(PRODUCT_ID, value);\n\n      if (res.status === 201) {\n        setSnakebarOpen(true);\n        setFlashMEssage(`${PRODUCT_NAME_EN} (${PRODUCT_NAME_BN}) Added to cart`);\n        setValue(\"\");\n      } else {\n        setSnakeBarType(\"error\");\n        setFlashMEssage(\"Server Error! please try again later\");\n      }\n    } else {\n      setSnakebarOpen(true);\n      setSnakeBarType(\"error\");\n      setFlashMEssage(\"Enter a valid amount\");\n    }\n  };\n\n  const handleCloseSnackbar = (event, reason) => {\n    if (reason === 'clickaway') {\n      return;\n    }\n\n    setSnakebarOpen(false);\n  };\n\n  let isAvailable = true;\n  let offerText = \"ðŸ˜… No offer available\";\n\n  if (PRODUCT_IN_STOCK_QUANTITY <= 0) {\n    offerText = \"ðŸ˜¥ Currently not in stock\";\n    isAvailable = false;\n  } else if (PRODUCT_DISCOUNT > 0) {\n    let price = PRODUCT_AGRO_PRICE * PRODUCT_DISCOUNT / 100;\n    offerText = `ðŸ’• Discount: à§³ ${price} /  ${PRODUCT_MEASUREMENT_UNIT} (${PRODUCT_DISCOUNT}%)`;\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(Snackbar, {\n      open: snakeBarOpen,\n      autoHideDuration: 6000,\n      onClose: handleCloseSnackbar,\n      children: /*#__PURE__*/_jsxDEV(Alert, {\n        onClose: handleCloseSnackbar,\n        severity: snakeBarType,\n        sx: {\n          width: '100%'\n        },\n        children: flashMessage\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Paper, {\n      elevation: 6,\n      children: [/*#__PURE__*/_jsxDEV(CardActionArea, {\n        onClick: () => navigate(`/products/${PRODUCT_ID}`),\n        children: [/*#__PURE__*/_jsxDEV(CardHeader, {\n          title: `ðŸ¥— ${PRODUCT_NAME_EN}`,\n          subheader: `${PRODUCT_NAME_BN} - à§³ ${PRODUCT_AGRO_PRICE} / ${PRODUCT_MEASUREMENT_UNIT}`\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 132,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(CardMedia, {\n          component: \"img\",\n          alt: \"green iguana\",\n          height: \"120\",\n          image: photo\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 136,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(CardContent, {\n          className: classes.offer,\n          children: /*#__PURE__*/_jsxDEV(Typography, {\n            gutterBottom: true,\n            variant: \"subtitle1\",\n            component: \"div\",\n            children: /*#__PURE__*/_jsxDEV(ListItemText, {\n              primary: offerText\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 148,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 143,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 142,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 17\n      }, this), isLoggedIn && /*#__PURE__*/_jsxDEV(CardActions, {\n        children: [/*#__PURE__*/_jsxDEV(FormControl, {\n          sx: {\n            marginRight: 1,\n            marginLeft: 1,\n            width: \"25ch\"\n          },\n          variant: \"outlined\",\n          focused: true,\n          children: [/*#__PURE__*/_jsxDEV(Input, {\n            id: \"outlined-adornment-weight\",\n            value: value,\n            color: \"secondary\",\n            onChange: e => {\n              handleChange(e);\n            },\n            disabled: !isAvailable || !isLoggedIn,\n            endAdornment: /*#__PURE__*/_jsxDEV(InputAdornment, {\n              position: \"end\",\n              children: PRODUCT_MEASUREMENT_UNIT\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 163,\n              columnNumber: 37\n            }, this),\n            \"aria-describedby\": \"outlined-weight-helper-text\",\n            type: \"number\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 156,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(FormHelperText, {\n            id: \"outlined-weight-helper-text\",\n            children: totalPrice\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 170,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 155,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          size: \"small\",\n          variant: \"contained\",\n          disabled: !isAvailable || !isLoggedIn,\n          onClick: submitForm,\n          children: \"Add to cart\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 174,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 154,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 116,\n    columnNumber: 9\n  }, this);\n}\n\n_s(Product, \"ZWMVjZ+H5AuYMXqc0iktzERDbac=\", false, function () {\n  return [useNavigate, useSelector];\n});\n\n_c3 = Product;\n\nvar _c, _c2, _c3;\n\n$RefreshReg$(_c, \"Alert$React.forwardRef\");\n$RefreshReg$(_c2, \"Alert\");\n$RefreshReg$(_c3, \"Product\");","map":{"version":3,"sources":["H:/Agro Chain/agro_chain/client/src/components/productsComponents/product.js"],"names":["React","useState","useEffect","useNavigate","useSelector","CardContent","CardMedia","Typography","ListItemText","Input","InputAdornment","FormHelperText","FormControl","CardActions","Button","Paper","CardHeader","CardActionArea","Snackbar","MuiAlert","style","userApi","Alert","forwardRef","props","ref","Product","navigate","users","state","value","setValue","totalPrice","setTotalPrice","snakeBarOpen","setSnakebarOpen","flashMessage","setFlashMEssage","isLoggedIn","setIsLoggedIn","snakeBarType","setSnakeBarType","fetchData","res","data","code","userId","handleChange","event","target","PRODUCT_AGRO_PRICE","PRODUCT_DISCOUNT","PRODUCT_ID","ADMIN_ID","PRODUCT_NAME_EN","PRODUCT_NAME_BN","PRODUCT_IN_STOCK_QUANTITY","PRODUCT_MEASUREMENT_UNIT","PRODUCT_IMG","photo","classes","submitForm","e","addToCart","status","handleCloseSnackbar","reason","isAvailable","offerText","price","width","offer","marginRight","marginLeft"],"mappings":"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","sourcesContent":["import React, {useState, useEffect} from 'react';\r\nimport {useNavigate} from 'react-router-dom';\r\nimport {useSelector} from 'react-redux'\r\n// MaterialUI Elements\r\nimport CardContent from '@mui/material/CardContent';\r\nimport CardMedia from '@mui/material/CardMedia';\r\nimport Typography from '@mui/material/Typography';\r\nimport ListItemText from \"@mui/material/ListItemText\";\r\nimport Input from '@mui/material/Input';\r\nimport InputAdornment from \"@mui/material/InputAdornment\";\r\nimport FormHelperText from \"@mui/material/FormHelperText\";\r\nimport FormControl from \"@mui/material/FormControl\";\r\nimport CardActions from '@mui/material/CardActions';\r\nimport Button from '@mui/material/Button';\r\nimport Paper from '@mui/material/Paper';\r\nimport CardHeader from '@mui/material/CardHeader';\r\nimport CardActionArea from '@mui/material/CardActionArea';\r\nimport Snackbar from '@mui/material/Snackbar';\r\nimport MuiAlert from '@mui/material/Alert';\r\n\r\nimport style from \"../../styles/productStyle\"\r\nimport * as userApi from \"../../api/users\"\r\n\r\nconst Alert = React.forwardRef(function Alert(props, ref) {\r\n    return <MuiAlert elevation={6} ref={ref} variant=\"filled\" {...props} />;\r\n});\r\n\r\nexport default function Product(props) {\r\n    const navigate = useNavigate();\r\n    const users = useSelector((state) => state.users);\r\n    const [value, setValue] = useState(\"\");\r\n    const [totalPrice, setTotalPrice] = useState(\"Enter Amount\");\r\n    const [snakeBarOpen, setSnakebarOpen] = useState(false);\r\n    const [flashMessage, setFlashMEssage] = useState(\"\");\r\n    const [isLoggedIn, setIsLoggedIn] = useState(false);\r\n    const [snakeBarType, setSnakeBarType] = useState(\"success\");\r\n\r\n\r\n    useEffect(() => {\r\n        async function fetchData(){ \r\n            const res = await userApi.isLoggedIn();\r\n            if(res.data.code === 200 || res.data.code === 970904){\r\n                setIsLoggedIn(true);\r\n            }\r\n        }\r\n        fetchData\r\n    }, [users.userId])\r\n\r\n    const handleChange = (event) => {\r\n        setValue(event.target.value);\r\n        if(event.target.value !== \"\"){\r\n            setTotalPrice(`Price: ${(PRODUCT_AGRO_PRICE - PRODUCT_AGRO_PRICE * PRODUCT_DISCOUNT /100) * event.target.value}`);\r\n        } else {\r\n            setSnakeBarType(\"error\")\r\n            setTotalPrice(\"Add to cart\")\r\n        }\r\n    };\r\n\r\n\r\n    const {PRODUCT_ID, \r\n        ADMIN_ID, \r\n        PRODUCT_NAME_EN, \r\n        PRODUCT_NAME_BN, \r\n        PRODUCT_IN_STOCK_QUANTITY, \r\n        PRODUCT_MEASUREMENT_UNIT, \r\n        PRODUCT_AGRO_PRICE, \r\n        PRODUCT_DISCOUNT, \r\n        PRODUCT_IMG\r\n    } = props;\r\n\r\n    const photo = `/img/${PRODUCT_IMG}`;\r\n    const classes = style();\r\n\r\n    const submitForm = async (e) => {\r\n        if(value > 0){\r\n            setSnakebarOpen(false);\r\n            const res = await userApi.addToCart(PRODUCT_ID, value);\r\n\r\n            if(res.status === 201){\r\n                setSnakebarOpen(true);\r\n                setFlashMEssage(`${PRODUCT_NAME_EN} (${PRODUCT_NAME_BN}) Added to cart`);\r\n                setValue(\"\")\r\n            }\r\n            else {\r\n                setSnakeBarType(\"error\")\r\n                setFlashMEssage(\"Server Error! please try again later\");\r\n            }\r\n        }\r\n        else {\r\n            setSnakebarOpen(true);\r\n            setSnakeBarType(\"error\");\r\n            setFlashMEssage(\"Enter a valid amount\");\r\n        }\r\n    }\r\n\r\n    const handleCloseSnackbar = (event, reason) => {\r\n        if (reason === 'clickaway') {\r\n            return;\r\n        }\r\n        setSnakebarOpen(false);\r\n    };\r\n\r\n    let isAvailable = true;\r\n    let offerText = \"ðŸ˜… No offer available\"\r\n\r\n    if(PRODUCT_IN_STOCK_QUANTITY <= 0){\r\n        offerText = \"ðŸ˜¥ Currently not in stock\"\r\n        isAvailable = false;\r\n    }\r\n    else if(PRODUCT_DISCOUNT > 0){\r\n        let price = PRODUCT_AGRO_PRICE * PRODUCT_DISCOUNT / 100;\r\n        offerText = `ðŸ’• Discount: à§³ ${price} /  ${PRODUCT_MEASUREMENT_UNIT} (${PRODUCT_DISCOUNT}%)`\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <Snackbar \r\n                open={snakeBarOpen} \r\n                autoHideDuration={6000} \r\n                onClose={handleCloseSnackbar}\r\n            >\r\n                <Alert \r\n                    onClose={handleCloseSnackbar} \r\n                    severity={snakeBarType} \r\n                    sx={{ width: '100%' }}\r\n                >\r\n                    {flashMessage}\r\n                </Alert>\r\n            </Snackbar>\r\n            <Paper elevation={6}>\r\n                <CardActionArea onClick={() => navigate(`/products/${PRODUCT_ID}`)}>\r\n                    <CardHeader\r\n                        title={`ðŸ¥— ${PRODUCT_NAME_EN}`}\r\n                        subheader={`${PRODUCT_NAME_BN} - à§³ ${PRODUCT_AGRO_PRICE} / ${PRODUCT_MEASUREMENT_UNIT}`}\r\n                    />\r\n                    <CardMedia\r\n                        component=\"img\"\r\n                        alt=\"green iguana\"\r\n                        height=\"120\"\r\n                        image={photo}\r\n                    />\r\n                    <CardContent  className={classes.offer}>\r\n                        <Typography \r\n                            gutterBottom \r\n                            variant=\"subtitle1\" \r\n                            component=\"div\"\r\n                        >\r\n                            <ListItemText primary={offerText}/>\r\n                        </Typography>\r\n                    </CardContent>\r\n                </CardActionArea>\r\n\r\n                {isLoggedIn && (\r\n                    <CardActions>\r\n                        <FormControl sx={{ marginRight: 1, marginLeft: 1, width: \"25ch\" }} variant=\"outlined\" focused>\r\n                            <Input\r\n                                id=\"outlined-adornment-weight\"\r\n                                value={value}\r\n                                color= \"secondary\"\r\n                                onChange={(e) => {handleChange(e)}}\r\n                                disabled={!isAvailable || !isLoggedIn}\r\n                                endAdornment={\r\n                                    <InputAdornment position=\"end\">\r\n                                        {PRODUCT_MEASUREMENT_UNIT}\r\n                                    </InputAdornment>\r\n                                }\r\n                                aria-describedby=\"outlined-weight-helper-text\"    \r\n                                type=\"number\"                    \r\n                            />\r\n                            <FormHelperText id=\"outlined-weight-helper-text\">\r\n                                {totalPrice}\r\n                            </FormHelperText>\r\n                        </FormControl>\r\n                        <Button \r\n                            size=\"small\" \r\n                            variant=\"contained\"\r\n                            disabled={!isAvailable || !isLoggedIn}\r\n                            onClick={submitForm}\r\n                        >\r\n                            Add to cart\r\n                        </Button>\r\n                    </CardActions>\r\n                )}\r\n            </Paper>\r\n        </div>\r\n   );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}